if(!window.DM_PublisherGallery&&!window.DM_ApiV1Hook&&window.DM_jQuery){DM_PublisherGallery=(function(){var q,s=[],v=1,x,u={autoplay:1,syndication:""},f=["related","logo","syndication"],h,r,C="Show more videos",D={fields:"id,title,thumbnail_small_url,thumbnail_medium_url,thumbnail_large_url,thumbnail_url,description",page:1,limit:12},y=12,c=1;width="100%",gaLoad=true;function w(E){g("http://localhost/gallery/src/style.css?"+Math.random());A();m(E);if(E.hasOwnProperty("containerId")){q="#"+E.containerId;if(E.hasOwnProperty("loadMore")){C=E.loadMore}if(E.hasOwnProperty("limit")){y=E.limit}if(E.hasOwnProperty("width")){width=E.width}if(E.hasOwnProperty("columns")){c=E.columns}if(E.hasOwnProperty("categories")){b(E.categories)}else{if(E.hasOwnProperty("list")&&E.hasOwnProperty("href")){h=E.list;x=E.href;j(l)}else{z("Missing parameters: videoblock should have at least the following parameters [list, href], and video gallery the following one[categories]")}}}else{z("Undefined widget containerId")}d()}function A(){hash=window.location.hash.replace("#","");hash=hash.split("&");DM_jQuery(hash).each(function(E,F){if(F.match("category=")){h=F.replace("category=","")}else{if(F.match("vid=")){r=F.replace("vid=","")}}})}function m(E){DM_jQuery(f).each(function(F,G){if(E.hasOwnProperty(G)){u[G]=E[G]}})}function b(E){var G=E.length,F=0,H=0;DM_jQuery(E).each(function(I,J){if(DM_jQuery.isPlainObject(J)&&J.hasOwnProperty("list")&&J.hasOwnProperty("title")){F++}else{if(H==0){H=1;B(J,E)}}});if(F==G){s=E;o()}}function B(G,E){var H="name",F=DM_jQuery.inArray(G,E);if(G.match("/user")){H="screenname"}DM.api(G,{fields:H},function(I){E[F]={list:G,title:I[H]};b(E)})}function o(){var E="<ul>";DM_jQuery(q).html('<div id="publisher_gallery_menu"></div><div style="clear:both;"></div>');DM_jQuery(s).each(function(F,G){E+='<li><a href="'+G.list+'">'+G.title+"</a></li>"});E+="</ul>";DM_jQuery("#publisher_gallery_menu").html(E);DM_jQuery("#publisher_gallery_menu").find("a").click(function(G){G.preventDefault();var F=DM_jQuery(this).attr("href").replace("http://"+window.location.hostname,"");p(F)});if(!h){p(s[0]["list"])}else{p(h)}}function p(E){DM_jQuery.fancybox.showLoading();$categoryMenu=DM_jQuery(q).find("#publisher_gallery_menu li");$categoryMenu.removeClass("selected");v=1;if(DM_jQuery(q).find("#publisher_gallery_video_list")){DM_jQuery(q).find("#publisher_gallery_video_list").remove();DM_jQuery(q).find("#publisher_load_more").remove();DM_jQuery(q).find(".publisher_clear").remove()}if(E){DM_jQuery(s).each(function(F,G){if(G.list==E){h=E;$categoryMenu.eq(F).addClass("selected");j(e)}})}}function j(H){var F=new RegExp("/mychannel/([a-zA-Z0-9-_]{1,30})","i"),E,G=h+"/videos";if(h.match("mychannel")){E=F.exec(h);if(E[1]){G="/user/"+E[1]+"/subscriptions"}}D.page=v;D.limit=y;DM.api(G,D,function(I){H(I)})}function e(E){if(v==1){DM_jQuery(q).append('<div id="publisher_gallery_video_list"></div>');DM_jQuery(q).append('<div class="publisher_clear"></div><center><div id="publisher_load_more">'+C+"</div></center>");DM_jQuery(q).find("#publisher_load_more").click(function(){t()});if(r){n(r);r=undefined}$gallery=DM_jQuery(q).find("#publisher_gallery_video_list");a($gallery);DM_jQuery(window).on("resize",function(){a($gallery)})}if(!$gallery){$gallery=DM_jQuery(q).find("#publisher_gallery_video_list")}var F="";DM_jQuery(E.list).each(function(G,H){F+='<div class="publisher_gallery_video '+H.id+'">     <div class="publisher_gallery_thumb " style="background:url('+H.thumbnail_large_url+') no-repeat center top;"></div>     <div class="publisher_gallery_title_container">         <div class="publisher_gallery_title">'+H.title.truncate(30,true)+'         </div>     </div>     <div class="publisher_gallery_play_button"></div></div>'});$gallery.append(F);DM_jQuery.fancybox.hideLoading();i();if(!E.has_more){DM_jQuery(q).find("#publisher_load_more").hide()}}function a(E){E.css({width:"100%",margin:0});var F,H,G;F=Math.floor(E.width()/320);H=320*F;G=(E.width()-H)/2;E.css({width:H,"margin-left":G})}function i(){DM_jQuery(".publisher_gallery_video").click(function(){divClass=DM_jQuery(this).attr("class").split(" ");if(divClass.length>=2){videoId=divClass[1];DM_jQuery.fancybox.open({type:"iframe",href:"http://www.dailymotion.com/embed/video/"+videoId+"?"+DM_jQuery.param(u),width:560,height:315,scrolling:"no",padding:0,autoSize:false});_gaq.push(["DM_PublisherGallery._trackEvent","Views","Syndication Key",""+u.syndication+""],["DM_PublisherGallery._trackEvent","Views","Video Id",videoId],["DM_PublisherGallery._trackEvent","Views","Domain",window.location.href])}})}function n(E){DM_jQuery.fancybox.open({type:"iframe",href:"http://www.dailymotion.com/embed/video/"+E+"?"+DM_jQuery.param(u),width:560,height:315,scrolling:"no",padding:0,autoSize:false});_gaq.push(["DM_PublisherGallery._trackEvent","Views","Syndication Key",""+u.syndication+""],["DM_PublisherGallery._trackEvent","Views","Video Id",E],["DM_PublisherGallery._trackEvent","Views","Domain",window.location.href])}function t(){DM_jQuery.fancybox.showLoading();v++;j(e)}function g(E){var F=document.createElement("link");F.setAttribute("rel","stylesheet");F.setAttribute("type","text/css");F.setAttribute("href",E);document.getElementsByTagName("head")[0].appendChild(F)}function z(E){if(window.Debug&&window.Debug.writeln){window.Debug.writeln(E)}else{if(window.console){window.console.log(E)}}}function d(){window._gaq=window._gaq||[];_gaq.push(["DM_PublisherGallery._setAccount","UA-28845982-4"]);_gaq.push(["DM_PublisherGallery._setDomainName","none"]);_gaq.push(["DM_PublisherGallery._trackPageview"]);(function(){if(gaLoad){var F=document.createElement("script");F.type="text/javascript";F.async=true;F.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var E=document.getElementsByTagName("script")[0];E.parentNode.insertBefore(F,E)}})()}function l(H){DM_jQuery(q).html('<div id="publisher_videoblock"></div>');$videoblock=DM_jQuery(q).find("#publisher_videoblock");$videoblock.css("width",width);var J="",G=Math.floor(width/c),I=100,F="thumbnail_large_url",E=Math.round(G/1.875);if(G){if(G>320){F="thumbnail_url"}else{if(G<=320&&G>160){F="thumbnail_large_url"}else{I=k(G);F="thumbnail_medium_url";E=Math.round(G/1.33)}}}DM_jQuery(H.list).each(function(K,L){J+='<div class="dm_publisher_video '+L.id+'" style="height: '+E+'px;" title="'+L.title+'">   <div>       <div class="dm_publisher_thumb" style="background:url('+L[F]+") no-repeat center center; height: "+E+'px;"></div>   </div>   <div class="dm_publisher_play"></div>   <div class="dm_publisher_title">       <div style="padding:10px;">'+L.title.truncate(I,true)+"</div>   </div></div>"});$videoblock.html(J);DM_jQuery.fancybox.hideLoading();$videoblock.find(".dm_publisher_video").css("width",G);$videoblock.find(".dm_publisher_play").css({top:Math.round((E-40)/2),left:Math.round((G-45)/2)});$videoblock.find(".dm_publisher_title").css({width:G+"px",height:E+"px",left:0});DM_jQuery(".dm_publisher_video").mouseover(function(){DM_jQuery(this).find(".dm_publisher_play").hide();DM_jQuery(this).find(".dm_publisher_title").show()}).mouseout(function(){DM_jQuery(this).find(".dm_publisher_play").show();DM_jQuery(this).find(".dm_publisher_title").hide()});DM_jQuery(".dm_publisher_video").click(function(){divClass=DM_jQuery(this).attr("class").split(" ");if(divClass.length>=2){videoId=divClass[1];window.location.replace(x+"#category="+h+"&vid="+videoId)}})}function k(E){return Math.round(E/8)}String.prototype.truncate=function(G,E){var H=this.length>G,F=H?this.substr(0,G-1):this;F=E&&H?F.substr(0,F.lastIndexOf(" ")):F;return H?F+"...":F};return{init:w}})();window.dmAsyncInit=function(){DM.init({status:true,cookie:true});if(DM_jQuery.isFunction(window.dmPublisherAsyncInitGallery)){window.dmPublisherAsyncInitGallery()}};(function(){var b=document.createElement("script");b.async=true;b.src=document.location.protocol+"//api.dmcdn.net/all.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)}())};