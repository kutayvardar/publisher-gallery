if(!window.DM_PublisherGallery&&window.DM_jQuery){DM_PublisherGallery=(function(h){var s,u=[],x=1,z,w={autoplay:1,syndication:""},f=["related","logo","syndication"],i,t,E="Show more videos",F={fields:"id,title,thumbnail_small_url,thumbnail_medium_url,thumbnail_large_url,thumbnail_url,description",page:1,limit:12},A=12,c=1;width="100%",gaLoad=true,cssUrl="http://publisher.dailymotion.com/widgets/style-gallery.css";function y(G){g(cssUrl);C();o(G);if(G.hasOwnProperty("containerId")){s="#"+G.containerId;if(G.hasOwnProperty("loadMore")){E=G.loadMore}if(G.hasOwnProperty("limit")){A=G.limit}if(G.hasOwnProperty("width")){width=G.width}if(G.hasOwnProperty("columns")){c=G.columns}if(G.hasOwnProperty("categories")){b(G.categories)}else{if(G.hasOwnProperty("list")&&G.hasOwnProperty("href")){i=G.list;z=G.href;k(m)}else{B("Missing parameters: videoblock should have at least the following parameters [list, href], and video gallery the following one[categories]")}}}else{B("Undefined widget containerId")}d()}function C(){hash=window.location.hash.replace("#","");hash=hash.split("&");h(hash).each(function(G,H){if(H.match("category=")){i=H.replace("category=","")}else{if(H.match("vid=")){t=H.replace("vid=","")}}})}function o(G){h(f).each(function(H,I){if(G.hasOwnProperty(I)){w[I]=G[I]}})}function b(G){var I=G.length,H=0,J=0;h(G).each(function(K,L){if(h.isPlainObject(L)&&L.hasOwnProperty("list")&&L.hasOwnProperty("title")){H++}else{if(J==0){J=1;D(L,G)}}});if(H==I){u=G;q()}}function D(I,G){var J="name",H=h.inArray(I,G);if(I.match("/user")){J="screenname"}DM.api(I,{fields:J},function(K){G[H]={list:I,title:K[J]};b(G)})}function q(){var G="<ul>";h(s).html('<div id="publisher_gallery_menu"></div><div style="clear:both;"></div>');h(u).each(function(H,I){G+='<li><a href="'+I.list+'">'+I.title+"</a></li>"});G+="</ul>";h("#publisher_gallery_menu").html(G);h("#publisher_gallery_menu").find("a").click(function(I){I.preventDefault();var H=h(this).attr("href").replace("http://"+window.location.hostname,"");r(H)});if(!i){r(u[0]["list"])}else{r(i)}}function r(G){h.fancybox.showLoading();$categoryMenu=h(s).find("#publisher_gallery_menu li");$categoryMenu.removeClass("selected");x=1;if(h(s).find("#publisher_gallery_video_list")){h(s).find("#publisher_gallery_video_list").remove();h(s).find("#publisher_load_more").remove();h(s).find(".publisher_clear").remove()}if(G){h(u).each(function(H,I){if(I.list==G){i=G;$categoryMenu.eq(H).addClass("selected");k(e)}})}}function k(J){var H=new RegExp("/mychannel/([a-zA-Z0-9-_]{1,30})","i"),G,I=i+"/videos";if(i.match("mychannel")){G=H.exec(i);if(G[1]){I="/user/"+G[1]+"/subscriptions"}}F.page=x;F.limit=A;DM.api(I,F,function(K){J(K)})}function e(G){if(x==1){h(s).append('<div id="publisher_gallery_video_list"></div>');h(s).append('<div class="publisher_clear"></div><center><div id="publisher_load_more">'+E+"</div></center>");h(s).find("#publisher_load_more").click(function(){v()});if(t){p(t);t=undefined}$gallery=h(s).find("#publisher_gallery_video_list");a($gallery);h(window).on("resize",function(){a($gallery)})}if(!$gallery){$gallery=h(s).find("#publisher_gallery_video_list")}var H="";h(G.list).each(function(I,J){H+='<div class="publisher_gallery_video '+J.id+'">     <div class="publisher_gallery_thumb " style="background:url('+J.thumbnail_large_url+') no-repeat center top;"></div>     <div class="publisher_gallery_title_container">         <div class="publisher_gallery_title">'+J.title.truncate(30,true)+'         </div>     </div>     <div class="publisher_gallery_play_button"></div></div>'});$gallery.append(H);h.fancybox.hideLoading();j();if(!G.has_more){h(s).find("#publisher_load_more").hide()}}function a(G){G.css({width:"100%",margin:0});var H,J,I;H=Math.floor(G.width()/320);J=320*H;I=(G.width()-J)/2;G.css({width:J,"margin-left":I})}function j(){h(".publisher_gallery_video").click(function(){divClass=h(this).attr("class").split(" ");if(divClass.length>=2){videoId=divClass[1];h.fancybox.open({type:"iframe",href:"http://www.dailymotion.com/embed/video/"+videoId+"?"+h.param(w),width:560,height:315,scrolling:"no",padding:0,autoSize:false});_gaq.push(["DM_PublisherGallery._trackEvent","Views","Syndication Key",""+w.syndication+""],["DM_PublisherGallery._trackEvent","Views","Video Id",videoId],["DM_PublisherGallery._trackEvent","Views","Domain",window.location.href])}})}function p(G){h.fancybox.open({type:"iframe",href:"http://www.dailymotion.com/embed/video/"+G+"?"+h.param(w),width:560,height:315,scrolling:"no",padding:0,autoSize:false});_gaq.push(["DM_PublisherGallery._trackEvent","Views","Syndication Key",""+w.syndication+""],["DM_PublisherGallery._trackEvent","Views","Video Id",G],["DM_PublisherGallery._trackEvent","Views","Domain",window.location.href])}function v(){h.fancybox.showLoading();x++;k(e)}function g(G){var H=document.createElement("link");H.setAttribute("rel","stylesheet");H.setAttribute("type","text/css");H.setAttribute("href",G);document.getElementsByTagName("head")[0].appendChild(H)}function B(G){if(window.Debug&&window.Debug.writeln){window.Debug.writeln(G)}else{if(window.console){window.console.log(G)}}}function d(){window._gaq=window._gaq||[];_gaq.push(["DM_PublisherGallery._setAccount","UA-28845982-4"]);_gaq.push(["DM_PublisherGallery._setDomainName","none"]);_gaq.push(["DM_PublisherGallery._trackPageview"]);(function(){if(gaLoad){var H=document.createElement("script");H.type="text/javascript";H.async=true;H.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var G=document.getElementsByTagName("script")[0];G.parentNode.insertBefore(H,G)}})()}function m(J){h(s).html('<div id="publisher_videoblock"></div>');$videoblock=h(s).find("#publisher_videoblock");$videoblock.css("width",width);var L="",I=Math.floor(width/c),K=100,H="thumbnail_large_url",G=Math.round(I/1.875);if(I){if(I>320){H="thumbnail_url"}else{if(I<=320&&I>160){H="thumbnail_large_url"}else{K=l(I);H="thumbnail_medium_url";G=Math.round(I/1.33)}}}h(J.list).each(function(M,N){L+='<div class="dm_publisher_video '+N.id+'" style="height: '+G+'px;" title="'+N.title+'">   <div>       <div class="dm_publisher_thumb" style="background:url('+N[H]+") no-repeat center center; height: "+G+'px;"></div>   </div>   <div class="dm_publisher_play"></div>   <div class="dm_publisher_title">       <div style="padding:10px;">'+N.title.truncate(K,true)+"</div>   </div></div>"});$videoblock.html(L);h.fancybox.hideLoading();$videoblock.find(".dm_publisher_video").css("width",I);$videoblock.find(".dm_publisher_play").css({top:Math.round((G-40)/2),left:Math.round((I-45)/2)});$videoblock.find(".dm_publisher_title").css({width:I+"px",height:G+"px",left:0});h(".dm_publisher_video").mouseover(function(){h(this).find(".dm_publisher_play").hide();h(this).find(".dm_publisher_title").show()}).mouseout(function(){h(this).find(".dm_publisher_play").show();h(this).find(".dm_publisher_title").hide()});h(".dm_publisher_video").click(function(){divClass=h(this).attr("class").split(" ");if(divClass.length>=2){videoId=divClass[1];window.location.replace(z+"#category="+i+"&vid="+videoId)}})}function l(G){return Math.round(G/8)}String.prototype.truncate=function(I,G){var J=this.length>I,H=J?this.substr(0,I-1):this;H=G&&J?H.substr(0,H.lastIndexOf(" ")):H;return J?H+"...":H};function n(G){cssUrl=G}return{init:y,setCssUrl:n}})(DM_jQuery);window.dmAsyncInit=function(){DM.init({status:true,cookie:true});if(DM_jQuery.isFunction(window.dmPublisherAsyncInitGallery)){window.dmPublisherAsyncInitGallery()}};(function(){var b=document.createElement("script");b.async=true;b.src=document.location.protocol+"//api.dmcdn.net/all.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)}())};